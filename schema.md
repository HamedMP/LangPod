# Technical Design Document

> Generated by [`ZenStack-markdown`](https://github.com/jiashengguo/zenstack-markdown)

- [User](#User)
- [Language](#Language)
- [Course](#Course)
- [UserCourse](#UserCourse)
- [Lesson](#Lesson)

## User

```mermaid
erDiagram
"User" {
  String id PK
  String clerkId
  DateTime createdAt
  String name
  String email
}

"User" ||--o{ "UserCourse": userCourses

```

- CREATE

- READ
  - ✅ auth() != null
- UPDATE

- DELETE

## Language

```mermaid
erDiagram
"Language" {
  String id PK
  String name
  String code
  DateTime createdAt
}

"Language" ||--o{ "Course": nativeCourses
"Language" ||--o{ "Course": targetCourses

```

- CREATE

- READ
  - ✅ true
- UPDATE

- DELETE

## Course

```mermaid
erDiagram
"Course" {
  String id PK
  String nativeLanguageId FK
  String targetLanguageId FK
  String outcome  "?"
  String level
  DateTime createdAt
}

"Course" }o--|| "Language": nativeLanguage
"Course" }o--|| "Language": targetLanguage
"Course" ||--o{ "UserCourse": userCourses
"Course" ||--o{ "Lesson": lessons

```

- CREATE
  - ✅ auth() != null
- READ
  - ✅ auth() != null
- UPDATE
  - ✅ auth() != null
- DELETE
  - ✅ auth() != null

## UserCourse

```mermaid
erDiagram
"UserCourse" {
  String id PK
  String userId FK
  String courseId FK
  UserCourseRole role
  DateTime createdAt
}

"UserCourse" }o--|| "User": user
"UserCourse" }o--|| "Course": course

```

- CREATE
  - ✅ auth() != null
- READ
  - ✅ auth() != null
- UPDATE
  - ✅ auth() != null
- DELETE
  - ✅ auth() != null

## Lesson

```mermaid
erDiagram
"Lesson" {
  String id PK
  String title
  String type
  String scenarioContext
  Json lessonJson  "?"
  String audioUrl  "?"
  DateTime createdAt
  String courseId FK
  ProgressStatus progress
}

"Lesson" }o--|| "Course": course

```

- CREATE
  - ✅ auth() != null
- READ
  - ✅ auth() != null
- UPDATE
  - ✅ auth() != null
- DELETE
  - ✅ auth() != null
