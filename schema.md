# Technical Design Document

> Generated by [`ZenStack-markdown`](https://github.com/jiashengguo/zenstack-markdown)

- [User](#User)
- [Language](#Language)
- [Course](#Course)
- [Lesson](#Lesson)
- [LessonCatalog](#LessonCatalog)

## User
```mermaid
erDiagram
"User" {
  String id PK 
  String clerkId  
  DateTime createdAt  
  String name  
  String email  
}

"User" ||--o{ "Course": studentCourses
"User" ||--o{ "Course": tutorCourses
"User" ||--o{ "Lesson": lessons

```
- CREATE

- READ

- UPDATE

- DELETE

## Language
```mermaid
erDiagram
"Language" {
  String id PK 
  String name  
  String code  
  DateTime createdAt  
}

"Language" ||--o{ "Course": nativeCourses
"Language" ||--o{ "Course": targetCourses
"Language" ||--o{ "LessonCatalog": nativeCatalog
"Language" ||--o{ "LessonCatalog": targetCatalog

```
- CREATE

- READ
  - ✅ true
- UPDATE

- DELETE

## Course
```mermaid
erDiagram
"Course" {
  String id PK 
  String nativeLanguageId FK 
  String targetLanguageId FK 
  String level  
  DateTime createdAt  
  String studentId FK 
  String tutorId FK "?"
}

"Course" }o--|| "Language": nativeLanguage
"Course" }o--|| "Language": targetLanguage
"Course" }o--|| "User": student
"Course" }o--|| "User": tutor
"Course" ||--o{ "Lesson": lessons

```
- CREATE
  - ✅ auth() != null
- READ
  - ✅ auth() != null
- UPDATE
  - ✅ auth() != null
- DELETE
  - ✅ auth() != null
## Lesson
```mermaid
erDiagram
"Lesson" {
  String id PK 
  String title  
  String type  
  String scenarioContext  
  Json lessonJson  "?"
  String audioUrl  "?"
  DateTime createdAt  
  String courseId FK 
  String userId FK 
  ProgressStatus progress  
}

"Lesson" }o--|| "Course": course
"Lesson" }o--|| "User": user

```
- CREATE

- READ

- UPDATE

- DELETE

## LessonCatalog
```mermaid
erDiagram
"LessonCatalog" {
  String id PK 
  String nativeLanguageId FK 
  String targetLanguageId FK 
  Json content  
  DateTime createdAt  
}

"LessonCatalog" }o--|| "Language": nativeLanguage
"LessonCatalog" }o--|| "Language": targetLanguage

```
- CREATE

- READ

- UPDATE

- DELETE
